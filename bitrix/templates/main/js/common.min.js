function extend(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function EmptyInput(e){this.el=e,this.initEvents()}function LoadFile(e){var t,i=document.querySelector(".progress"),n=document.querySelector(".form-field_file-collection"),s=document.querySelector(".file-load_container"),o=this;this.abortRead=function(){t.abort()},this.errorHandler=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:alert("File Not Found!");break;case e.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case e.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}},this.updateProgress=function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);t<100&&(i.style.width=t+"%",i.textContent=t+"%")}},this.handleFileSelect=function(e){i.style.width="0%",i.textContent="0%";var r=o.templateFile(e.target.files);e.target.files;t=new FileReader,t.onerror=o.errorHandler,t.onprogress=o.updateProgress,t.onabort=function(e){alert("File read cancelled")},t.onloadstart=function(e){i.classList.add("loading"),n.classList.add("file-success"),s.innerHTML=r},t.onload=function(e){i.style.width="100%",i.textContent="100%",setTimeout(function(){i.classList.remove("loading")},500)},t.readAsBinaryString(e.target.files[0])},this.templateFile=function(e){var t=[];console.log(t);for(var i,n=0;i=e[n];n++)t.push("<div class='file-template'><div class='file-name'>",escape(i.name),i.type,"</div></div>");return t.join("")},document.querySelector(e).addEventListener("change",o.handleFileSelect,!1)}function Accordion(e,t){this.el=e,this["default"]={classActive:"is-active"},this.options=extend({},this["default"]),extend(this.options,t),this.init()}function menuMobile(){return!!document.querySelector(".burger")&&void document.querySelector(".burger").addEventListener("click",function(){if(document.body.classList.contains("navigation-open"))document.body.classList.remove("navigation-open"),window.__prevScrollTop&&window.scroll(0,window.__prevScrollTop),this.classList.remove("open_burger"),delete window.__prevScrollTop;else{var e=window.scrollY;window.__prevScrollTop=e,document.body.classList.add("navigation-open"),document.body.style.top=-e+"px",window.scroll(0,window.__prevScrollTop),this.classList.add("open_burger")}})}function SearchForm(e){var t=this;t.initEvents=function(){t.el.on("focus",t.iFocus),t.el.on("blur",function(e){$(e.relatedTarget).hasClass("search-submit")||t.iBlur()}),t.el.on("input",t.iInput),t.submit.on("click",t.initSubmit),t.reset.on("click",t.iReset)},t.iInput=function(){t.iVal=$(this).val(),0!=t.iVal?(t.reset.addClass(t.def.resetClass),t.form.addClass(t.def.active)):(t.reset.removeClass(t.def.resetClass),t.form.removeClass(t.def.active))},t.iFocus=function(){t.iVal=t.el.val(),t.parent.addClass(t.def.open),t.submit.attr("type","submit"),0!=t.iVal.length&&t.form.addClass(t.def.active)},t.iBlur=function(){t.iVal=t.el.val(),0==t.iVal.length&&(t.parent.removeClass(t.def.open),t.submit.attr("type","button"))},t.iReset=function(){t.reset.removeClass(t.def.resetClass),t.form.removeClass(t.def.active),t.submit.attr("type","button"),t.el.attr("value",""),t.el.val(""),t.el.focus()},t.initSubmit=function(){return"submit"!==t.submit.attr("type")?t.el.trigger("focus"):alert("Send form!"),!1},t.iDetected=function(e){0!=t.iVal.length&&(t.iFocus(),t.reset.addClass(t.def.resetClass))},t.init=function(){t.el=e,t.parent=t.el.parent(),t.iVal=t.el.val(),t.submit=t.parent.find(".search-submit"),t.reset=t.parent.find(".search-reset"),t.form=t.el.parents("form"),t.def={open:"open",resetClass:"show",active:"not-empty"},t.iDetected(),t.initEvents()},e.length&&t.init()}function shareCenter(e){var t=this;t.el=e,t.initEvents=function(){t.trigger.addEventListener("click",t.openShare),t.container.addEventListener("mouseleave",t.closeShare)},t.openShare=function(){t.container.classList.contains("open")?t.closeShare():t.container.classList.add("open")},t.closeShare=function(){t.container.classList.remove("open")},t.init=function(){t.trigger=document.querySelector(".share-trigger"),t.body=document.querySelector(".share-body"),t.container=document.querySelector(t.el),t.initEvents()},t.init()}function sliderSlick(e,t){$(e).slick({slidesToShow:1,slidesToScroll:1,asNavFor:t,infinite:!1,nextArrow:"<button type='button' class='slick-next'><i class='icon icon-right'><svg><filter xmlns='http://www.w3.org/2000/svg' id='dropshadow' height='130%''><feGaussianBlur in='SourceAlpha' stdDeviation='3'/><feOffset dx='0' dy='0' result='offsetblur'/><feComponentTransfer><feFuncA type='linear' slope='0.4'/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in='SourceGraphic'/></feMerge></filter><use style='filter: url(#dropshadow)' xlink:href='#icon-right' xmlns:xlink='http://www.w3.org/1999/xlink'></use></svg></i></button>",prevArrow:"<button type='button' class='slick-prev'><i class='icon icon-left'><svg><filter xmlns='http://www.w3.org/2000/svg' id='dropshadow' height='130%''><feGaussianBlur in='SourceAlpha' stdDeviation='3'/><feOffset dx='0' dy='0' result='offsetblur'/><feComponentTransfer><feFuncA type='linear' slope='0.4'/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in='SourceGraphic'/></feMerge></filter><use style='filter: url(#dropshadow)' xlink:href='#icon-left' xmlns:xlink='http://www.w3.org/1999/xlink'></use></svg></i></button>",responsive:[{breakpoint:768,settings:{arrows:!1}}]}),$(".slider-thumbnails").slick({slidesToShow:8,slidesToScroll:1,arrows:!1,asNavFor:e,focusOnSelect:!0,infinite:!1,touchMove:!1,responsive:[{breakpoint:768,settings:{slidesToShow:5}},{breakpoint:414,settings:{slidesToShow:4}}]})}function DropFile(e){var t=this;t.el=$("#"+e),t.initDrop=function(){var e=10485760;Dropzone.autoDiscover=!1,t.DROPZONE=new Dropzone("#"+t.drop,{url:"fileupload.php",maxFilesize:t.fileSize,maxFiles:t.fileCount,paramName:"file",previewTemplate:document.querySelector("#previewTemplate").innerHTML}),t.DROPZONE.on("uploadprogress",function(i,n,s){var o=t.getTotalUploadedFilesSize();o+s>e&&t.generateMSG("error")}),t.DROPZONE.on("addedfile",function(e,i){t.generateMSG("success")}),t.DROPZONE.on("removedfile",function(e,i,n){t.generateMSG("Success"),setTimeout(function(){0==t.el.find(".dz-preview").length&&t.el.find(".msg-container").empty()})}),t.DROPZONE.on("error",function(e,i){console.log(e,i),t.generateMSG("error")})},t.getTotalUploadedFilesSize=function(e){return t.totalSize=0,t.DROPZONE.getFilesWithStatus(Dropzone.SUCCESS).forEach(function(e){t.totalSize=t.totalSize+e.size}),t.totalSize},t.generateMSG=function(e){t.errorMsg="<div class='error-msg'><i><svg class='icon icon-warning'><use xlink:href='#icon-warning' xmlns:xlink='http://www.w3.org/1999/xlink'></use></svg></i><div class='error-text'>You have exceeded the 10Mb limit of attachments</div></div>",t.successMsg="<div class='success-msg'><div class='success-text'>Up to 5 attachments.The total size of attachments should not exceed 10Mb</div></div>",t.el.find(".msg-container").empty(),"error"===e?(t.el.find(".msg-container").append(t.errorMsg),t.el.find(".form-field_file-collection").addClass("no-events")):(t.el.find(".msg-container").append(t.successMsg),t.el.find(".form-field_file-collection").removeClass("no-events"))},t.init=function(){t.fileSize=t.el.data("maxfilesize"),t.fileCount=t.el.data("maxfile"),t.drop=t.el.find(".upload-files").attr("id"),t.initDrop()},t.init()}function SelectBox(e){this.el=e,this.init()}function tagsMerger(){function e(){return"<div class='tags-list_hidden'><div class='trigger hidden'><span>...</span></div><div class='tags-list-container'><div class='tag-list-hidden'></div></div></div>"}var t=$(".js-count");t.each(function(){function t(){var e=o.hasClass("hidden")?i.width():i.width()-o.width();n.width()>e?(r.push(n.width()),n.children().last().prependTo(s),o.hasClass("hidden")&&o.removeClass("hidden")):(e>r[r.length-1]&&(s.children().first().appendTo(n),r.pop()),r.length<1&&(o.addClass("hidden"),s.addClass("hidden"))),o.attr("count",r.length),n.width()>e&&t()}$(this).append(e);var i=$(this),n=i.find(".tags-list"),s=i.find(".tag-list-hidden"),o=i.find(".trigger"),r=[];i.hasClass("initialize")||(i.on("click",function(e){return e.stopPropagation(),!1}),i.find(".trigger").on("click",function(){$(this).parent().toggleClass("open")}),i.find(".tags-list_hidden").on("mouseleave",function(){$(this).removeClass("open")}),t(),$(window).on("resize",function(){t()}),i.addClass("initialize"))})}function Portfolio(e,t){this.el=e,this.options={classActive:"is-active"},this.options=extend({},this.options),extend(this.options,t),this.init()}function getRandomizer(e){for(var t=[],i=[],n=!1,s=0;s<e.cards.length;s++)e.cards[s].full&&(t.push(s),n=!0);t[0]=0,t.push(e.cards.length);for(var s=0;s<t.length-1;s++)i.push(t[s+1]-t[s]-1);n||i[0]++;for(var o=[],r=2,s=0;s<i.length;s++){var a=0;for(o[s]=[];i[s]>0;)i[s]%2!=0?(i[s]-=3,o[s][a]="type:1",a++):(i[s]-=2,o[s][a]="type:"+r,a++,r++,r>4&&(r=2))}for(var l=[],s=0;s<o.length;s++){n&&l.push("full-width");for(var c=0;c<o[s].length;c++)"type:1"==o[s][c]?l.push("one-quarter-width","one-quarter-width","one-quarter-width"):"type:2"==o[s][c]?l.push("three-quarter-width","one-quarter-width"):"type:3"==o[s][c]?l.push("medium-width","medium-width"):l.push("one-quarter-width","three-quarter-width")}return l}function scroller(e){var t=e;t.each(function(){var e=($(this),$(this).width()),t=$(this).find(".scroller").width(),i=$(this).find(".scroller").position().left,n=i+t;i<0?$(this).parent().addClass("shadow-left"):$(this).parent().removeClass("shadow-left"),n>e?$(this).parent().addClass("shadow-right"):$(this).parent().removeClass("shadow-right")})}EmptyInput.prototype={initEvents:function(){this.el.each(function(){$(this).on("blur",function(){this.val=$(this).val(),0!=this.val.length?$(this).addClass("no-empty"):$(this).removeClass("no-empty")})})}},Accordion.prototype={init:function(){this.trigger=[].slice.call($(this.options.head)),this.initEvents()},initEvents:function(){var e=this;[].forEach.call(this.trigger,function(t){$(t).on("click",function(){$(this).parent().hasClass(e.options.classActive)?e.close($(t)):e.open($(t))})}),$(window).on("resize",function(){this.timer,clearTimeout(this.timer),this.timer=setTimeout(function(){e.bindingResize()},100)})},open:function(e){e.parent().addClass(this.options.classActive).next().slideDown().parent().siblings().find("."+this.options.classActive).removeClass(this.options.classActive).next().slideUp()},close:function(e){e.parent().removeClass(this.options.classActive).next().slideUp()},bindingResize:function(){var e=this;$(window).width()>979&&e.el.find(this.options.classActive)?e.el.find("."+e.options.classActive).blur().next().removeAttr("style"):e.el.find("."+e.options.classActive).next().show()}},menuMobile(),function(){function e(){document.body.classList.contains("navigation-open")||(window.scrollY>=125?(t.classList.add("topper"),window.scrollY>=500?t.classList.add("topper-inn","topper-animation"):t.classList.remove("topper-inn")):t.classList.remove("topper","topper-animation"))}var t=document.querySelector(".header");return!!t&&(window.addEventListener("scroll",e),void e())}(),SelectBox.prototype={init:function(){this.arr=[],this.option=this.el.find("option"),this.selectTrigger=this.el.next().find(".select-text_container"),this.text=this.selectTrigger.find(".select-text"),this.generateDropItem(this.option)},generateDropItem:function(e){this.parent=this.el.next().find(".select-dropdown");var t=document.createDocumentFragment(),i=document.createElement("ul");e.each(function(e,i){var n=document.createElement("li");n.setAttribute("data-id",e),n.setAttribute("data-value",i.value),n.innerHTML=i.value,t.appendChild(n)}),i.appendChild(t),this.parent.append(i),this.initEvents()},initEvents:function(){var e=this;this.trigger=this.parent.find("li"),this.trigger.on("click",function(){e.selected($(this))}),this.selectTrigger.on("click",function(){e.selectTrigger.parent().hasClass("open")?e.closeDrop():e.openDrop()}),document.body.addEventListener("click",function(){e.closeDrop()}),this.selectTrigger.parent().on("click",function(e){e.stopPropagation()})},openDrop:function(){this.selectTrigger.parent().addClass("open"),this.el.parent().addClass("no-empty")},closeDrop:function(){return this.selectTrigger.parent().removeClass("open"),0===this.text.text().length&&void this.el.parent().removeClass("no-empty")},selected:function(e){var t=e.data("id"),i=e.data("value");this.el.attr("size","1"),this.option.eq(t).prop("selected",!0),this.text.text(i),this.el.blur(),this.closeDrop()}},function(){$("[type='tel']").each(function(){var e=$(this);e.on("keypress",function(e){if((e.charCode<40||e.charCode>41)&&(e.charCode<48||e.charCode>57)&&45!=e.charCode&&32!=e.charCode&&43!=e.charCode&&0!=e.charCode)return!1})})}(),function(){var e=(new Date).valueOf(),t=$(".js-validation");t.each(function(){var t=$(this),i=t.find(".hidden");$.validate({form:t,borderColorOnError:!1,onValidate:function(e){console.log(i.val().length)},onSuccess:function(t){if(0!==i.val().length||Date.now()-e<=3e3)alert("this is bot");else{alert("success");var n=t.serialize();console.log(n)}return!1}})})}(),Portfolio.prototype={init:function(){this.getJsonTemplate(!0,!0,!0),this.btnMore=$(this.el).find(".load-card"),this.initEvents()},initEvents:function(){var e=this;this.btnMore.click(function(){return e.getJsonTemplate(!0,!1,!1),!1})},getJsonTemplate:function(e,t,i){var n=this;$.ajax({url:"../json/portfolio-editor.json",dataType:"json",success:function(s){var o=getRandomizer(s);if(e){var r=n.templateCard(s,o);i?$(n.options.appendContainer).html(r):$(n.options.appendContainer).append(r)}if(t){var r=n.templateTags(s);$(n.options.navTabs).after(r),n.initTagsEvent()}tagsMerger()}})},initTagsEvent:function(){var e=this;this.tagItem=$(this.options.navTabs).next().find("a"),this.tagItem.first().addClass("active"),this.tagItem.click(function(){return e.getJsonTemplate(!0,!1,!0),$(this).addClass("active").siblings().removeClass("active"),!1})},templateTags:function(e){this.fragmentTags=document.createDocumentFragment(),this.tempTags="";var t=document.createElement("div");t.classList.add("tags");var i=document.createElement("div");i.classList.add("tags-list");for(var n=0;n<e.tags.length;n++)this.tempTags+="<a href='#' class='tags-item'><span>"+e.tags[n]+"</span></a>";return i.innerHTML=this.tempTags,t.append(i),t},templateCard:function(e,t){console.log(t);this.fragmentCard=document.createDocumentFragment(),this.tempCard="";for(var i=0;i<e.cards.length;i++){this.tempCard+="<div class='card "+t[i]+"'><div class='card-item'><a class='image-container' href="+e.cards[i].link+"><div class='img' style='background-image: url("+e.cards[i].img+")'></div></a>","one-quarter-width"===t[i]?this.tempCard+="<div class='tags js-count'><div class='tags-list'>":this.tempCard+="<div class='tags'><div class='tags-list'>";for(var n=0;n<e.cards[i].tagsCard.length;n++)this.tempCard+="<a class='tags-item' href="+e.cards[i].link+"><span>"+e.cards[i].tagsCard[n]+"</span></a>";this.tempCard+="</div></div><div class='card-info'><a class='title' href="+e.cards[i].link+">"+e.cards[i].title+"</a>","undefined"!=e.cards[i].descr&&(this.tempCard+="<div class = 'descr'><p>"+e.cards[i].descr+"</p></div>"),this.tempCard+="</div></div></div>"}return this.fragmentCard.append(this.tempCard),this.tempCard}};var portfolio=new Portfolio(".portfolio-manipulation",{navTabs:".portfolio-nav_tab",navTags:".tags-list",appendContainer:".projects-ajax"}),obj=[];$(document).ready(function(){new EmptyInput($(".js-empty")),new Accordion($(".navigation"),{head:".navigation-item_trigger",body:".navigation-item_body"});if($(".js-input")){new SearchForm($(".js-input"))}if($(".share-center").length){new shareCenter(".share-center")}if(sliderSlick(".slider-for",".slider-thumbnails"),$("#form-footer").length){new DropFile("form-footer")}new SelectBox($(".selectbox"));scroller($(".js-scroll")),$(".js-scroll").on("scroll",function(){scroller($(".js-scroll"))}),$(window).on("resize",function(){scroller($(".js-scroll"))})});